(function(e){e.fn.countdown=function(t,n){function i(e,t){return function(){return t.call(e)}}var r=["seconds","minutes","hours","days","weeks","daysLeft"];return this.each(function(){function c(){if(s.closest("html").length===0){p();h("removed");return}l--;if(l<0){l=0}u={seconds:l%60,minutes:Math.floor(l/60)%60,hours:Math.floor(l/60/60)%24,days:Math.floor(l/60/60/24),weeks:Math.floor(l/60/60/24/7),daysLeft:Math.floor(l/60/60/24)%7};for(var e=0;e<r.length;e++){var t=r[e];if(o[t]!=u[t]){o[t]=u[t];h(t)}}if(l==0){p();h("finished")}}function h(r){var i=e.Event(r);i.date=new Date((new Date).valueOf()+l);i.value=o[r]||"0";i.toDate=t;i.lasting=u;switch(r){case"seconds":case"minutes":case"hours":i.value=i.value<10?"0"+i.value.toString():i.value.toString();break;default:if(i.value){i.value=i.value.toString()}break}n.call(s,i)}function p(){clearInterval(a)}function d(){s.data("countdownInterval",setInterval(i(s,c),1e3));a=s.data("countdownInterval")}if(!(t instanceof Date)){if(String(t).match(/^[0-9]*$/)){t=new Date(t)}else if(t.match(/([0-9]{1,2})\/([0-9]{1,2})\/([0-9]{2,4})\s([0-9]{1,2})\:([0-9]{2})\:([0-9]{2})/)||t.match(/([0-9]{2,4})\/([0-9]{1,2})\/([0-9]{1,2})\s([0-9]{1,2})\:([0-9]{2})\:([0-9]{2})/)){t=new Date(t)}else if(t.match(/([0-9]{1,2})\/([0-9]{1,2})\/([0-9]{2,4})/)||t.match(/([0-9]{2,4})\/([0-9]{1,2})\/([0-9]{1,2})/)){t=new Date(t)}else{throw new Error("Doesn't seen to be a valid date object or string")}}var s=e(this),o={},u={},a=s.data("countdownInterval"),f=new Date,l=Math.floor((t.valueOf()-f.valueOf())/1e3);c();if(a)p();d()})}})(jQuery)